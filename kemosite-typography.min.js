var typography_obj=new function(){this.parameters={foveal_vision_min:1,foveal_vision_avg:"",foveal_vision_max:2,screen_field_of_view_min:30,screen_field_of_view_avg:"",screen_field_of_view_max:35,screen_field_of_view_ratio_min:"",screen_field_of_view_ratio_avg:"",screen_field_of_view_ratio_max:"",screen_foveal_vision_pixels_min:"",screen_foveal_vision_pixels_avg:"",screen_foveal_vision_pixels_max:"",reading_foveal_vision_inches_min:.277,reading_foveal_vision_inches_avg:.416,reading_foveal_vision_inches_max:.555,
reading_foveal_vision_pixels_min:"",reading_foveal_vision_pixels_avg:"",reading_foveal_vision_pixels_max:"",final_foveal_vision_pixels_min:"",final_foveal_vision_pixels_avg:"",final_foveal_vision_pixels_max:"",letter_diameter_pixels_min:"",letter_diameter_pixels_avg:"",letter_diameter_pixels_max:"",font_height_ratio:"",golden_ratio:1.618};this.user_configuration={screen_width:screen.width,screen_height:screen.height,screen_min:"",characters_width:"",font_height_pixels:"",ex_height_pixels:""};this.outputs=
{font_height_pixels_100:"",font_height_pixels_200:"",font_height_pixels_300:"",font_height_pixels_400:"",font_height_pixels_500:"",font_height_pixels_600:"",font_height_pixels_700:"",font_height_pixels_800:"",font_height_pixels_900:"",font_height_em_100:"",font_height_em_200:"",font_height_em_300:"",font_height_em_400:"",font_height_em_500:"",font_height_em_600:"",font_height_em_700:"",font_height_em_800:"",font_height_em_900:"",font_size_adjust:""};this.init=function(){var a=document.createElement("div");
a.setAttribute("id","user_properties_obj");a.innerHTML="Typhy";document.getElementsByTagName("body")[0].insertBefore(a,document.getElementsByTagName("body")[0].childNodes[0]);a.setAttribute("style","font-size: 1rem; line-height: 1; padding: 0; margin: 0; width: 1in; border: 0;");typography_obj.user_configuration.font_height_pixels=a.clientHeight;typography_obj.user_configuration.characters_width=a.clientWidth;a.setAttribute("style","font-size: 1ex; line-height: 1; padding: 0; margin: 0; width: 1in; border: 0;");
typography_obj.user_configuration.ex_height_pixels=a.clientHeight;document.getElementsByTagName("body")[0].removeChild(a);typography_obj.user_configuration.screen_min=Math.min(typography_obj.user_configuration.screen_width,typography_obj.user_configuration.screen_height);typography_obj.parameters.font_height_ratio=Math.round(typography_obj.user_configuration.ex_height_pixels/typography_obj.user_configuration.font_height_pixels*1E3)/1E3;typography_obj.parameters.foveal_vision_avg=Math.round((typography_obj.parameters.foveal_vision_min+
typography_obj.parameters.foveal_vision_max)/2*1E3)/1E3;typography_obj.parameters.screen_field_of_view_avg=Math.round((typography_obj.parameters.screen_field_of_view_min+typography_obj.parameters.screen_field_of_view_max)/2*1E3)/1E3;typography_obj.parameters.screen_field_of_view_ratio_min=Math.round(typography_obj.parameters.foveal_vision_min/typography_obj.parameters.screen_field_of_view_min*1E3)/1E3;typography_obj.parameters.screen_field_of_view_ratio_avg=Math.round(typography_obj.parameters.foveal_vision_avg/
typography_obj.parameters.screen_field_of_view_avg*1E3)/1E3;typography_obj.parameters.screen_field_of_view_ratio_max=Math.round(typography_obj.parameters.foveal_vision_max/typography_obj.parameters.screen_field_of_view_max*1E3)/1E3;typography_obj.parameters.screen_foveal_vision_pixels_min=Math.round(typography_obj.user_configuration.screen_min*typography_obj.parameters.screen_field_of_view_ratio_min);typography_obj.parameters.screen_foveal_vision_pixels_avg=Math.round(typography_obj.user_configuration.screen_min*
typography_obj.parameters.screen_field_of_view_ratio_avg);typography_obj.parameters.screen_foveal_vision_pixels_max=Math.round(typography_obj.user_configuration.screen_min*typography_obj.parameters.screen_field_of_view_ratio_max);typography_obj.parameters.reading_foveal_vision_pixels_min=Math.round(typography_obj.parameters.reading_foveal_vision_inches_min*typography_obj.user_configuration.characters_width);typography_obj.parameters.reading_foveal_vision_pixels_avg=Math.round(typography_obj.parameters.reading_foveal_vision_inches_avg*
typography_obj.user_configuration.characters_width);typography_obj.parameters.reading_foveal_vision_pixels_max=Math.round(typography_obj.parameters.reading_foveal_vision_inches_max*typography_obj.user_configuration.characters_width);typography_obj.parameters.final_foveal_vision_pixels_min=Math.max(typography_obj.parameters.screen_foveal_vision_pixels_min,typography_obj.parameters.reading_foveal_vision_pixels_min);typography_obj.parameters.final_foveal_vision_pixels_avg=Math.max(typography_obj.parameters.screen_foveal_vision_pixels_avg,
typography_obj.parameters.reading_foveal_vision_pixels_avg);typography_obj.parameters.final_foveal_vision_pixels_max=Math.max(typography_obj.parameters.screen_foveal_vision_pixels_max,typography_obj.parameters.reading_foveal_vision_pixels_max);typography_obj.parameters.letter_diameter_pixels_min=Math.round(typography_obj.parameters.final_foveal_vision_pixels_min/4.5/typography_obj.parameters.font_height_ratio);typography_obj.parameters.letter_diameter_pixels_avg=Math.round(typography_obj.parameters.final_foveal_vision_pixels_avg/
4.5/typography_obj.parameters.font_height_ratio);typography_obj.parameters.letter_diameter_pixels_max=Math.round(typography_obj.parameters.final_foveal_vision_pixels_max/4.5/typography_obj.parameters.font_height_ratio);a=[];var b=0;a[b++]=Math.round(typography_obj.parameters.final_foveal_vision_pixels_min/4/typography_obj.parameters.font_height_ratio);a[b++]=Math.round(typography_obj.parameters.final_foveal_vision_pixels_avg/4/typography_obj.parameters.font_height_ratio);a[b++]=Math.round(typography_obj.parameters.final_foveal_vision_pixels_max/
4/typography_obj.parameters.font_height_ratio);a[b++]=Math.round(typography_obj.parameters.final_foveal_vision_pixels_min/4.5/typography_obj.parameters.font_height_ratio);a[b++]=Math.round(typography_obj.parameters.final_foveal_vision_pixels_avg/4.5/typography_obj.parameters.font_height_ratio);a[b++]=Math.round(typography_obj.parameters.final_foveal_vision_pixels_max/4.5/typography_obj.parameters.font_height_ratio);a[b++]=Math.round(typography_obj.parameters.final_foveal_vision_pixels_min/5/typography_obj.parameters.font_height_ratio);
a[b++]=Math.round(typography_obj.parameters.final_foveal_vision_pixels_avg/5/typography_obj.parameters.font_height_ratio);a[b++]=Math.round(typography_obj.parameters.final_foveal_vision_pixels_max/5/typography_obj.parameters.font_height_ratio);a.sort(function(f,e){return f-e});typography_obj.outputs.font_height_pixels_100=Math.max(a[0],typography_obj.user_configuration.font_height_pixels);typography_obj.outputs.font_height_pixels_200=Math.max(typography_obj.outputs.font_height_pixels_100+1,a[1],typography_obj.user_configuration.font_height_pixels);
typography_obj.outputs.font_height_pixels_300=Math.max(typography_obj.outputs.font_height_pixels_200+1,a[2],typography_obj.user_configuration.font_height_pixels);typography_obj.outputs.font_height_pixels_400=Math.max(typography_obj.outputs.font_height_pixels_300+1,a[3],typography_obj.user_configuration.font_height_pixels);typography_obj.outputs.font_height_pixels_500=Math.max(typography_obj.outputs.font_height_pixels_400+1,a[4],typography_obj.user_configuration.font_height_pixels);typography_obj.outputs.font_height_pixels_600=
Math.max(typography_obj.outputs.font_height_pixels_500+1,a[5],typography_obj.user_configuration.font_height_pixels);typography_obj.outputs.font_height_pixels_700=Math.max(typography_obj.outputs.font_height_pixels_600+1,a[6],typography_obj.user_configuration.font_height_pixels);typography_obj.outputs.font_height_pixels_800=Math.max(typography_obj.outputs.font_height_pixels_700+1,a[7],typography_obj.user_configuration.font_height_pixels);typography_obj.outputs.font_height_pixels_900=Math.max(typography_obj.outputs.font_height_pixels_800+
1,a[8],typography_obj.user_configuration.font_height_pixels);typography_obj.outputs.font_size_adjust=typography_obj.parameters.font_height_ratio};this.activate_kemosite_typography=function(a){a.replace("_","-");a=document.createElement("style");a.setAttribute("type","text/css");var b=":root { --kemosite-typography-font-size-adjust: "+typography_obj.outputs.font_size_adjust+";--kemosite-typography-100: "+typography_obj.outputs.font_height_pixels_100+"px;--kemosite-typography-200: "+typography_obj.outputs.font_height_pixels_200+
"px;--kemosite-typography-300: "+typography_obj.outputs.font_height_pixels_300+"px;--kemosite-typography-400: "+typography_obj.outputs.font_height_pixels_400+"px;--kemosite-typography-500: "+typography_obj.outputs.font_height_pixels_500+"px;--kemosite-typography-600: "+typography_obj.outputs.font_height_pixels_600+"px;--kemosite-typography-700: "+typography_obj.outputs.font_height_pixels_700+"px;--kemosite-typography-800: "+typography_obj.outputs.font_height_pixels_800+"px;--kemosite-typography-900: "+
typography_obj.outputs.font_height_pixels_900+"px;} ";a.styleSheet?a.styleSheet.cssText=b:a.appendChild(document.createTextNode(b));document.getElementsByTagName("head")[0].insertBefore(a,document.getElementsByTagName("head")[0].childNodes[0]);if(window.matchMedia("(min-width: 39ch)").matches)for(a=document.querySelectorAll("body.activate_kemosite_typography .post, body.activate_kemosite_typography .page, body.activate_kemosite_typography .single"),b=0;b<a.length;b++)for(var f=typography_obj.recursive_locate_text(a[b]),
e=f.querySelectorAll("p, li"),c=0;c<e.length;c++)156<=typography_obj.recursive_locate_text(e[c]).innerHTML.length&&f.classList.add("kemosite_typography_columns")};this.recursive_locate_text=function(a){return a.childNodes&&0<a.childNodes.length&&"#text"!==a.childNodes[0].nodeName?typography_obj.recursive_locate_text(a.childNodes[0]):a};this.orphans_control=function(){if(window.matchMedia("(min-width: 39ch)").matches)for(var a=document.querySelectorAll("body.activate_kemosite_typography.orphan_control h1, body.activate_kemosite_typography.orphan_control h2, body.activate_kemosite_typography.orphan_control h3, body.activate_kemosite_typography.orphan_control h4, body.activate_kemosite_typography.orphan_control h5, body.activate_kemosite_typography.orphan_control h6, body.activate_kemosite_typography.orphan_control p,body.activate_kemosite_typography.orphan_control td,body.activate_kemosite_typography.orphan_control figcaption,body.activate_kemosite_typography.orphan_control li"),
b=RegExp("[(!|.|,|?|:|;)]","g"),f=0;f<a.length;f++){var e=typography_obj.recursive_locate_text(a[f]);if(e.childNodes&&1==e.childNodes.length&&null!==e.childNodes[0].nodeValue&&e.childNodes[0].nodeValue.includes(" ")){var c=e.childNodes[0].nodeValue.toString(),h=c.match(b);c=c.split(b);var k=[];if(null!==h&&0<h.length){for(var d=0;d<c.length;d++){var g=c[d].match(new RegExp(/\b(\p{L}+?)\b/,"giu")),m=new RegExp(/^(\s*)([\p{L}]*['"\u2018\u2019\u201c\u201d]*[\p{L}]*)(?:\s)([\p{L}]*['"\u2018\u2019\u201c\u201d]*[\p{L}]*)/,
"giu"),l=new RegExp(/([\p{L}]*['"\u2018\u2019\u201c\u201d]*[\p{L}]*)(?:\s)([\p{L}]*['"\u2018\u2019\u201c\u201d]*[\p{L}]*)$/,"giu");c[d]=c[d].replace("\n","");null!==g&&3==g.length?(g=c[d].replace(l,"$1&nbsp;$2"),c[d]=g):null!==g&&3<g.length&&(g=c[d].replace(m,"$1$2&nbsp;$3").replace(l,"$1&nbsp;$2"),c[d]=g);k[d]=h[d]?c[d]+h[d]:c[d]}c=k.join("");e.innerHTML=c}}}}};